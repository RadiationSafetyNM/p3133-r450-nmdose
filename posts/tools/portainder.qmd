---
title: "Docker"
description: "Ubuntuì— Docker ì„¤ì¹˜ ë° ì‚¬ìš©ë²•"
author: "BenKorea"
date: "2025-03-09"
date-modified: last-modified
categories: [docker]
---


ê³µì‹ë„ì»¤ì‚¬ì´íŠ¸(https://docs.docker.com/engine/install/ubuntu/) ë‚´ìš©ì„ ì°¸ê³ í•˜ì—¬ ì§„í–‰í•¨

## ì‚¬ì „ ì¤€ë¹„

### ë°©í™”ë²½ ì œí•œ ì‚¬í•­
ì–´ë ¤ì›Œì„œ íŒ¨ìŠ¤

> **âš ï¸ ì£¼ì˜**  
> `ufw` ë˜ëŠ” `firewalld`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°©í™”ë²½ì„ ê´€ë¦¬í•˜ëŠ” ê²½ìš°, Dockerë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆ í¬íŠ¸ë¥¼ ë…¸ì¶œí•˜ë©´ ë°©í™”ë²½ ê·œì¹™ì„ ìš°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [Dockerì™€ ufw](https://docs.docker.com/network/iptables/) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
>
> DockerëŠ” `iptables-nft` ë° `iptables-legacy`ë§Œ ì§€ì›í•©ë‹ˆë‹¤. `nft`ë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì„±í•œ ë°©í™”ë²½ ê·œì¹™ì€ Dockerì—ì„œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë°©í™”ë²½ ê·œì¹™ì„ ì ìš©í•˜ë ¤ë©´ `iptables` ë˜ëŠ” `ip6tables`ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ë©°, `DOCKER-USER` ì²´ì¸ì— ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [íŒ¨í‚· í•„í„°ë§ ë° ë°©í™”ë²½](https://docs.docker.com/network/packet-filtering-firewalls/) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

### ìš´ì˜ì²´ì œ ìš”êµ¬ ì‚¬í•­

Docker Engineì„ ì„¤ì¹˜í•˜ë ¤ë©´ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ì˜ 64ë¹„íŠ¸ ìš°ë¶„íˆ¬(Ubuntu) ë²„ì „ì´ í•„ìš”í•©ë‹ˆë‹¤.

- `Ubuntu Oracular 24.10`
- `Ubuntu Noble 24.04 (LTS)`
- `Ubuntu Jammy 22.04 (LTS)`
- `Ubuntu Focal 20.04 (LTS)`

Docker Engineì€ ë‹¤ìŒ ì•„í‚¤í…ì²˜ë¥¼ ì§€ì›í•©ë‹ˆë‹¤: `x86_64 (amd64)`, `armhf`, `arm64`, `s390x`, `ppc64le (ppc64el)`

> **ğŸ“Œ ì°¸ê³ :**  
> Ubuntu ê¸°ë°˜ ë°°í¬íŒ(ì˜ˆ: Linux Mint)ì€ ê³µì‹ì ìœ¼ë¡œ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## ì´ì „ ë²„ì „ ì œê±°

Docker Engineì„ ì„¤ì¹˜í•˜ê¸° ì „ì— ì¶©ëŒì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì˜ ë¹„ê³µì‹ Docker íŒ¨í‚¤ì§€ë¥¼ ì œê±°í•´ì•¼ í•©ë‹ˆë‹¤.

### ì œê±°í•´ì•¼ í•˜ëŠ” íŒ¨í‚¤ì§€ ëª©ë¡:

- `docker.io`
- `docker-compose`
- `docker-compose-v2`
- `docker-doc`
- `podman-docker`
- `containerd`
- `runc`

for ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ í•œì¤„ì˜ ëª…ë ¹ì–´ë¡œ ëª¨ë‘ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```{r uninstall_conflicting_packages, eval=FALSE, filename="Bash"}
for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done
```

ì™„ë²½ì œê±°ë¥¼ ìœ„í•´ì„œëŠ” ë‹¤ìŒì˜ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”. [Docker Engine ì„¤ì¹˜í•˜ê¸° ì „ì— ê¸°ì¡´ Docker ì œê±°í•˜ê¸°](https://docs.docker.com/engine/install/ubuntu/#uninstall-old-versions)


## ì„¤ì¹˜
ì—¬ëŸ¬ê°€ì§€ ì„¤ì¹˜ë°©ë²•ì´ ìˆìœ¼ë‚˜ ì—¬ê¸°ì„œëŠ” aptë¥¼ ì´ìš©í•œ ë°©ë²•ìœ¼ë¡œ ì§„í–‰

### Set up Docker's apt repository.

```{r GPG_key, eval=FALSE, filename="Bash"}
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc
```

- ca-certificates: SSL ì¸ì¦ì„œë¥¼ ê´€ë¦¬í•˜ëŠ” íŒ¨í‚¤ì§€ë¡œ, HTTPS ì—°ê²°ì„ ì‹ ë¢°í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.
- curl: ì¸í„°ë„·ì—ì„œ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ëª…ë ¹ì¤„ ë„êµ¬ì…ë‹ˆë‹¤.
- install -m 0755 -d /etc/apt/keyrings
    - m 0755: ë””ë ‰í† ë¦¬ì˜ ê¶Œí•œì„ 0755(ì†Œìœ ìëŠ” ì½ê¸°/ì“°ê¸°/ì‹¤í–‰ ê°€ëŠ¥, ë‹¤ë¥¸ ì‚¬ìš©ìëŠ” ì½ê¸°/ì‹¤í–‰ ê°€ëŠ¥)ë¡œ ì„¤ì •
    - d: ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” ì˜µì…˜
- f: ìš”ì²­ ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì¶œë ¥
- s: ì§„í–‰ ìƒíƒœ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ì§€ ì•ŠìŒ
- S: -s ì˜µì…˜ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ì—¬ ì˜¤ë¥˜ ë°œìƒ ì‹œ ë©”ì‹œì§€ë¥¼ ì¶œë ¥
- L: ë¦¬ë””ë ‰ì…˜ì´ ìˆëŠ” ê²½ìš° ìµœì¢… ëª©ì ì§€ê¹Œì§€ ë”°ë¼ê°
ë‹¤ìš´ë¡œë“œëœ GPG í‚¤ëŠ” /etc/apt/keyrings/docker.ascì— ì €ì¥ë©ë‹ˆë‹¤.
chmod a+r /etc/apt/keyrings/docker.asc
a+r: ëª¨ë“  ì‚¬ìš©ì(a: all users)ì—ê²Œ ì½ê¸°(r: read) ê¶Œí•œì„ ë¶€ì—¬
ì´ ì„¤ì •ì´ ì—†ìœ¼ë©´ aptê°€ GPG í‚¤ë¥¼ ì½ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì €ì¥ì†Œ ê²€ì¦ì´ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```{r adding_repository, eval=FALSE, filename="Bash"}
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
```
- deb [ì˜µì…˜] ì €ì¥ì†ŒURL ë°°í¬íŒì½”ë“œë„¤ì„ [ì„¹ì…˜]ì˜ ë¬¸ë²•ì„ ë”°ë¦…ë‹ˆë‹¤.
- deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc]
    - deb: íŒ¨í‚¤ì§€ ì €ì¥ì†Œë¥¼ ì¶”ê°€í•˜ëŠ” ëª…ë ¹ì–´
    - arch=$(dpkg --print-architecture): í˜„ì¬ ì‹œìŠ¤í…œì˜ ì•„í‚¤í…ì²˜ë¥¼ ì¶œë ¥í•˜ëŠ” ëª…ë ¹ì–´
    - signed-by=/etc/apt/keyrings/docker.asc: GPG í‚¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥ì†Œë¥¼ ê²€ì¦
- https://download.docker.com/linux/ubuntu
    - ë„ì»¤ ê³µì‹ ì €ì¥ì†Œ ì£¼ì†Œ
- $(. /etc/os-release && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}") stable:
    - /etc/os-release: í™˜ê²½ë³€ìˆ˜ë¥¼ load
    - && echo "${UBUNTU_CODENAME:-$VERSION_CODENAME}"): CODENAMEì´ ì—†ìœ¼ë©´ VERSION_CODENAMEì„ ì¶œë ¥
- sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
    - tee: íŒŒì¼ì— ì…ë ¥í•œ ë‚´ìš©ì„ ì¶œë ¥í•˜ê³  íŒŒì¼ì— ì €ì¥
    - /dev/null: í™”ë©´ ì¶œë ¥ì„ ë¬´ì‹œ
    
### Install the Docker packages.

```{r installng_docker_packages, eval=FALSE, filename="Bash"}
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Verifying by hello-world

```{r verifying, eval=FALSE, filename="Bash"}
sudo docker run hello-world
```

## Portainer ì„¤ì¹˜

### Portainer ê°œë…

**Portainer**ëŠ” Docker ë° Kubernetes ì»¨í…Œì´ë„ˆ ê´€ë¦¬ë¥¼ ìœ„í•œ **ì›¹ ê¸°ë°˜ UI** ë„êµ¬ì…ë‹ˆë‹¤.  
CLI(Command Line Interface) ì—†ì´ë„ **ì»¨í…Œì´ë„ˆ, ì´ë¯¸ì§€, ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨ ë“±ì„ ì†ì‰½ê²Œ ê´€ë¦¬**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ğŸ”¹ ì£¼ìš” ê¸°ëŠ¥
- **ì»¨í…Œì´ë„ˆ ê´€ë¦¬**: ì‹¤í–‰, ì¤‘ì§€, ì‚­ì œ, ë¡œê·¸ í™•ì¸
- **ì´ë¯¸ì§€ ê´€ë¦¬**: ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ, ì‚­ì œ, íƒœê·¸ ì§€ì •
- **ë„¤íŠ¸ì›Œí¬ ë° ë³¼ë¥¨ ê´€ë¦¬**: ì»¨í…Œì´ë„ˆ ê°„ ë„¤íŠ¸ì›Œí¬ ì„¤ì • ë° ë°ì´í„° ë³¼ë¥¨ ê´€ë¦¬
- **ì‚¬ìš©ì ë° ì•¡ì„¸ìŠ¤ ì œì–´**: ì—¬ëŸ¬ ì‚¬ìš©ìì™€ ê¶Œí•œ ì„¤ì • ê°€ëŠ¥
- **Swarm ë° Kubernetes ì§€ì›**: Docker Swarmê³¼ Kubernetes í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ ê°€ëŠ¥

---

### Portainer ì„¤ì¹˜ ë°©ë²•

PortainerëŠ” Docker ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, Dockerê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.  

#### ë³¼ë¥¨ ìƒì„±
Portainerì˜ ì„¤ì • ë° ë°ì´í„°ëŠ” **ë³¼ë¥¨(volume)**ì— ì €ì¥ë©ë‹ˆë‹¤.

```{r portainer_create, eval=FALSE, filename="Bash"}
docker volume create portainer_data
```

#### Portainer ì»¨í…Œì´ë„ˆ ì‹¤í–‰**
ì´ëŠ” ì›ê²©ìœ¼ë¡œ ì´ë¯¸ì§€ë‹¤ìš´ë¡œë“œë¥¼ í¬í•¨í•œë‹¤.
```{r portainer_run, eval=FALSE, filename="Bash"}
docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce
```

- `-d`: ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
- `-p 8000:8000 -p 9000:9000`: í˜¸ìŠ¤íŠ¸ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆ í¬íŠ¸ ë§¤í•‘
- `--name=portainer`: ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •
- `--restart=always`: ì»¨í…Œì´ë„ˆê°€ ì¢…ë£Œë˜ë©´ ìë™ìœ¼ë¡œ ì¬ì‹œì‘
- `-v /var/run/docker.sock:/var/run/docker.sock`: í˜¸ìŠ¤íŠ¸ì˜ Docker ì†Œì¼“ì„ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë¡œ ì—°ê²°
- `-v portainer_data:/data`: Portainer ì„¤ì • ë° ë°ì´í„°ë¥¼ ì €ì¥í•  ë³¼ë¥¨ ì—°ê²°
- `portainer/portainer-ce`: Portainer ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€


#### ì‹¤í–‰ì¤‘ì¸ container í™•ì¸
```{r portainer_check, eval=FALSE, filename="Bash"}
docker ps
```

#### Portainer ì œê±°
```{r portainer_remove, eval=FALSE, filename="Bash"}
docker stop portainer
docker rm -f portainer
```

#### ë¡œê·¸ì¸ id & password
ben
benjamin060318


### docker-compose
Docker ComposeëŠ” ë‹¤ì¤‘ ì»¨í…Œì´ë„ˆ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì •ì˜í•˜ê³  ì‹¤í–‰í•˜ê¸° ìœ„í•œ ë„êµ¬ì…ë‹ˆë‹¤. ì´ ë„êµ¬ë¥¼ í™œìš©í•˜ë©´ ê°œë°œ ë° ë°°í¬ ê³¼ì •ì„ ê°„ì†Œí™”í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Composeë¥¼ ì‚¬ìš©í•˜ë©´ í•˜ë‚˜ì˜ ì´í•´í•˜ê¸° ì‰¬ìš´ YAML êµ¬ì„± íŒŒì¼ ë‚´ì—ì„œ ì„œë¹„ìŠ¤, ë„¤íŠ¸ì›Œí¬, ë³¼ë¥¨ ë“±ì„ í¬í•¨í•œ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤íƒì„ ì†ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨ í•œ ê°œì˜ ëª…ë ¹ì–´ë¡œ êµ¬ì„± íŒŒì¼ì— ëª…ì‹œëœ ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ í° ì¥ì ì…ë‹ˆë‹¤.

Docker ComposeëŠ” í”„ë¡œë•ì…˜, ìŠ¤í…Œì´ì§•, ê°œë°œ, í…ŒìŠ¤íŠ¸ í™˜ê²½ì€ ë¬¼ë¡  CI ì›Œí¬í”Œë¡œìš° ë“± ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¼ì´í”„ì‚¬ì´í´ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ë“¤ì„ ì œê³µí•˜ì—¬,

ì„œë¹„ìŠ¤ ì‹œì‘, ì¤‘ì§€, ì¬êµ¬ì¶•
ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ì˜ ìƒíƒœ í™•ì¸
ì‹¤í–‰ ì¤‘ì¸ ì„œë¹„ìŠ¤ì˜ ë¡œê·¸ ì¶œë ¥ ìŠ¤íŠ¸ë¦¬ë°
ì„œë¹„ìŠ¤ì— ëŒ€í•œ ì¼íšŒì„± ëª…ë ¹ ì‹¤í–‰
ë“±ì˜ ì‘ì—…ì„ ì†ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ì„¤ì¹˜

```{r docker_compose, eval=FALSE, filename="Bash"}
sudo apt-get install docker-compose
```

```{r docker_compose_version, eval=FALSE, filename="Bash"}
docker-compose --version
```

####  í”„ë¡œì íŠ¸ ë§Œë“¤ê¸°
/home/user/docker-compose-test ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•˜ê³ , í•´ë‹¹ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•©ë‹ˆë‹¤.

#### docker-compose.yml íŒŒì¼ ì‘ì„±

```{r docker_compose_yml, eval=FALSE, filename="docker-compose.yml"}
version: '3'

services:
  portainer:
    image: portainer/portainer-ce:latest
    container_name: portainer
    restart: always
    ports:
      - "8000:8000"  # Portainer Agent í†µì‹ ìš©
      - "9000:9000"  # Portainer ì›¹ UI ì ‘ì†ìš© (http://localhost:9000)
      - "9443:9443"  # HTTPS ì ‘ì†ìš©
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - portainer_data:/data

volumes:
  portainer_data:
```

#### ì‹¤í–‰

```{r docker_compose_portainer, eval=FALSE, filename="Bash"}
docker compose up -d
```







